Для Игоря и Андрея.

## Локальный запуск бота через Docker, чтобы использовать PostgreSQL:
### Первичные настройки:
1) Проверьте, что в вашем файле .env есть все необходимые переменные, указанные в .env.example (и они лежат в одной директории)
2) Убедитесь, что у вас установлены Docker и Docker Compose, для этого в терминале отправьте команды:
```
docker --version
docker compose version
```
Если нет, то установите Docker Desktop по ссылке: https://docs.docker.com/get-started/get-docker/
Создайте аккаунт.
### Первый запуск:
1) Запустите Docker Desktop
2) Находясь в корне проекта выполните в терминале команду: `docker compose up --build` (В терминале вы увидите, как поднимается Postgres, ждёт готовности, прогоняет миграции и стартует бот). Это займет какое-то время. Если возникнут ошибки, убедитесь, что ваша файловая структура соответсвует той, что в ветке draft, а файл .env лежит там же, где .env.example.
3) Как только контейнеры соберутся, можно пользоваться ботом.
4) Чтобы выйти из отслеживания логов, отправьте Ctrl+C (по крайней мере так у меня на винде)
### Дальнейшие запуски
При запущенном Docker Desktop, команды в терминале:
- Старт контейнеров: `docker compose start`
- Остановка: `docker compose stop`
- Отслеживание логов в терминале при запущенных контейнерах:
`docker compose logs -f` (чтобы отслеживать все логи)
`docker compose logs -f app` (только логи бота)
`docker compose logs -f app db` (бота и БД)
Чтобы выйти из отслеживания логов, отправьте Ctrl+C (по крайней мере так у меня на винде)
- Если контейнеры запущены, а вы изменили код, достаточно выполнить:
`docker compose restart app`
- Сброс контейнеров (если вносили изменения в requirements.txt или Docerfile):
`docker compose down` (сохраняет БД)
`docker compose down -v` (сносит БД и все данные в ней)
- Собрать с нуля все контейнеры:
`docker compose up --build` (собрать образы, запустить контейнеры и видеть логи)
`docker compose up --build -d` (собрать образы, запустить контейнеры, без просмотра логов)

### Просмотр БД:
1) Я настроила сервис Adminer для удобного просмотра (он автоматически разворачивается в доп контейнере)
2) При запущенных контейнерах перейдите по ссылке: http://localhost:8080/
3) Войдите с данными из вашего файла .env

## Настройка Гугл таблицы для экспорта:
1) добавить в свой файл .env такую переменную с этим значением:
Для Игоря:
```
GOOGLE_SHEET_ID=1BjtvG7j5eWKLHOdypZf8zsUtCOHTqWhCWgZuwIaqoMI
```
Для Андрея:
```
GOOGLE_SHEET_ID=1H8kPB9SVjXi2PKUkQebbu8reO-hcrFpi_rkGmoYmJBk
```
2) Найти в проекте файл credentials.example, скопировать оттуда все содержимое. В том же репозитории, где находится этот файл создать файл с названием credentials.json и вставить туда то, что скопировали. 



## Подготовка к запуску бота:
1. Добавить токен вашего бота в ваш локальный файл .env (должен лежать в той же директории, где .env.example). Если бота еще нет, создайте его через BotFather
2. В тестовой группе обновить настройки: группу нужно сделать публичной, а потом тут же снова сделать частной: это изменит статус группы - она станет супергруппой. ID этой группы указать в файле .env для переменной TELEGRAM_ID_TEST_GROUP
3. Добавить бота в группу и сделать его админом.

## Для запуска бота:
1. Запустите файл main.
2. Отправьте боту команду /start. Если вы участник группы, он пришлет приветствие в Random Coffee. Если вас нет в группе, то скажет, что у вас нет доступа.
